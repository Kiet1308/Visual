<!DOCTYPE html> 
<html> 
  
<head> 
    <meta charset="UTF-8"> 
      
    <title>QuickSort Sorting Algorithm</title> 
      
    <script src= 
"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/p5.js"
    type="text/javascript"></script> 
      
    <style>  
        body { 
            padding: 0; 
            margin: 0; 
        }  
        canvas { 
            vertical-align: top; 
        }  
    </style> 
</head> 
  
<body> 
    <script type="text/javascript"> 
          
        // Assign Global Values 
        let values = []; 
        let w = 1; 
        let states = []; 
        let sleeptime = 0;
        function setup() { 
          
            // Create Canvas of given Size 
  createCanvas(windowWidth, windowHeight);
          
            // Assign Array of Random Values 
            values = new Array(floor(width/w)); 
              
            for(let i = 0; i < values.length; i++) { 
                values[i] = float(random(height)); 
                states[i] = -1;  
            } 
              
            // To print values to Browser's Console 
            print("Unsorted Array:" + values); 
              
            // Invoke QuickSort Function 
            quickSort(values, 0, values.length-1); 
              
            print("Sorted Array:" + values); 
        } 
          
        // Asynchronous Definition of Quick Sort Function 
        async function quickSort(arr, start, end) { 
            if(start<end)
            {
             let index = await partition(arr, start, end); 
            //states[index] = -1; 
             
            // Promise.all is used so that each function 
            // should invoke simultaneously 
            await Promise.all([quickSort(arr, start, index-1), 
                    quickSort(arr, index+1, end)]); 
			}
            
        } 
          
        // Asynchronous Definition of Partition Function 
        async function partition(arr, start, end) { 
            let l = start
            let r = end
            
            let p = r
            let piv = arr[p]
            while(l<r)
            {
                while(arr[l]<=piv&&l<r) {l++};

                while(arr[r]>=piv&&l<r) {r--};

               await swap(arr,l,r)

			}
            await swap(arr,l,p)
            return l
              
        } 
          
        // Definition of Draw function 
        function draw() { 
              
            // Set Background Color  
            background(51); 
              
            for(let i = 0; i < values.length; i++) { 
                noStroke(); 
                fill(255); 
                  
                
                  
                rect(i*w, height - values[i], w, values[i]); 
            } 
        } 
          
        async function swap(arr, a, b) { 
              
            // Call to sleep function 
            await sleep(sleeptime); 
            let t = arr[a]; 
            arr[a] = arr[b]; 
            arr[b] = t; 
        } 
          
        // Definition of sleep function 
        function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

    </script> 
</body> 
  
</html>                   